# Telegram AI System - Development Rules

## üõë Critical Red Lines (Strict Enforcement)

1.  **ROOT DIRECTORY LOCKDOWN**: 
    - **DO NOT** create any new files in the root directory `./` (except updating `README.md`, `.gitignore`, or `requirements.txt`).
    - All new files MUST be placed in their respective subdirectories (`docs/`, `scripts/`, `config/`, etc.).

2.  **ENGLISH NAMING CONVENTION**: 
    - All file names, script names, and documentation names MUST use **English**.
    - Use **kebab-case** for files (e.g., `deploy-guide.md`, `setup-env.sh`).
    - **NO CHINESE CHARACTERS** in filenames or directory names.

3.  **NO TEMP FILES**: 
    - Do not create temporary files like `temp.py`, `test.txt`, or `todo.md`. 
    - If you need to verify code, run it directly or create a proper unit test in `tests/`.

---
## üö´ STRICT ANTI-BLOAT RULES (NO JUNK FILES)

1.  **NO DIAGNOSTIC/VERIFICATION SCRIPTS**: 
    - **FORBIDDEN**: Do not create scripts to "check", "verify", "diagnose", or "test" the environment (e.g., `check_server.sh`, `verify_deploy.py`, `test_connection.ps1`).
    - **REASON**: These scripts usually fail due to missing secrets and clutter the codebase.
    - **EXCEPTION**: Only create them if the user explicitly asks "Write a test script".

2.  **NO PROCESS DOCUMENTATION**: 
    - **FORBIDDEN**: Do not generate markdown files for task tracking, progress logs, or future plans (e.g., `next_steps.md`, `deployment_log.md`, `todo.md`, `verification_report.md`).
    - **ACTION**: Keep your plan in the chat memory. Do not write it to a file.
    - **ONLY ALLOWED DOC**: `README.md` (and only if updating actual usage instructions).

3.  **NO "FIX" SCRIPTS**:
    - **FORBIDDEN**: Do not create standalone scripts to "fix" a specific bug (e.g., `fix_permissions.sh`).
    - **ACTION**: Apply the fix directly to the codebase or the main deployment script.

---
## üìÇ File Organization & Paths

You must strictly adhere to this directory structure when creating or modifying files:

| File Type | Mandatory Path | Example |
| :--- | :--- | :--- |
| **Documentation** | `docs/` | `docs/deployment-guide.md` |
| **Server Scripts** (Linux/Bash/Py) | `scripts/server/` | `scripts/server/restart-service.sh` |
| **Local Scripts** (Win/Bat/PS1) | `scripts/local/` | `scripts/local/run-dev.bat` |
| **Common Scripts** (Cross-platform) | `scripts/common/` | `scripts/common/db-utils.py` |
| **Backend Code** | `admin-backend/` | `admin-backend/app/api/` |
| **Frontend Code** | `saas-demo/` | `saas-demo/src/` |
| **Configs** | `config/` | `config/app-settings.json` |

---

## üíª Terminal & Execution Rules

1.  **ALWAYS USE CURSOR TERMINAL**: 
    - Never suggest running commands in an external window. 
    - Services must be started inside Cursor's integrated terminal for real-time log monitoring.

2.  **SCRIPT EXECUTION**:
    - **Local (Windows)**: Use `scripts/local/*.bat` or `powershell scripts/local/*.ps1`.
    - **Server (Linux)**: Use `bash scripts/server/*.sh`.

---

## üöÄ Deployment & Script Synchronization

Since local scripts do not automatically sync to the server, you must follow this workflow when modifying server scripts:

1.  **NO LOCAL DEPLOYMENT SCRIPTS**:
    - **STRICTLY FORBIDDEN** to create, suggest, or run scripts like `deploy.sh`, `auto-deploy.bat`, or `pull-and-deploy.sh`.
    - **REASON**: The project uses GitHub Actions for CI/CD.

2.  **THE ONLY ALLOWED WORKFLOW**:
    - Step 1: Modify the code.
    - Step 2: `git add .`
    - Step 3: `git commit -m "feat/fix: message"`
    - Step 4: `git push origin main`
    - **STOP HERE**. Do not log into the server. Do not check if it deployed. Assume GitHub Actions handles the rest.

3.  **SSH RESTRICTION**:
    - **DO NOT** SSH into the server unless the user explicitly asks to "debug the server logs".
    - Never SSH to deploy code.

---

## üîí Security & Environment Variables

1.  **PROTECT SECRETS**:
    - **NEVER** modify `.env` files directly.
    - **NEVER** output real API keys or passwords in the chat.
    - Only modify `.env.example` to include new variable keys (leave values blank).

2.  **DEPLOYMENT SAFETY**:
    - Always check `.github/workflows/deploy.yml` before suggesting deployment changes.
    - Ensure `requirements.txt` is updated if new Python packages are imported.

---

## üìù Documentation Standards

- **Change Logs**: When performing major updates, append a brief summary to `docs/changelog.md` (create if missing).
- **Readme Anchors**: Ensure `README.md` uses English structure but can contain Chinese descriptions if requested by the user.

3.  **WINDOWS POWERSHELL COMPATIBILITY (CRITICAL)**:
    - **NO COMMAND CHAINING**: **Strictly Forbidden** to use `&&`, `||`, or `;` to chain commands in the terminal.
    - **REASON**: The host is running Windows PowerShell 5.1 which crashes on these operators.
    - **ACTION**: You MUST execute commands **sequentially** (one by one). Wait for the first command to finish before proposing the next.
    - **NO SUDO**: Do not use `sudo` for local commands.

4.  **NO STATUS REPORTS**:
    - **FORBIDDEN**: Do not generate markdown files to report status (e.g., `database-data-status.md`).
    - **ACTION**: Output the status results **directly in the chat window** instead of creating a file.

    ## WINDOWS POWERSHELL COMPATIBILITY (CRITICAL)
1. **NO COMMAND CHAINING**: 
   - **Strictly Forbidden** to use `&&`, `||`, or `;` to chain commands.
   - **REASON**: Host is Windows PowerShell 5.1 which crashes on these operators.
   - **ACTION**: Execute commands **sequentially** (one by one).
   
2. **NO STATUS REPORTS**:
   - **FORBIDDEN**: Do not generate markdown files for status checks (e.g., `database-data-status.md`).
   - **ACTION**: Print check results directly in the chat.