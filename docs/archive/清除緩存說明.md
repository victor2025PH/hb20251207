# 清除緩存說明

## 問題原因

根據測試結果，發現服務器上的代碼沒有正確更新，導致：
- 按鈕文字還是舊的「查看规则」
- 彈窗沒有發光特效
- 沒有「以後不再彈出」選擇框
- 規則內容還在使用「元」而不是加密貨幣

## 解決方案

### 1. 服務器端修復（已執行）

已在服務器上執行：
- 強制更新代碼（git reset --hard）
- 清除構建緩存
- 重新構建前端
- 重啟所有服務

### 2. 瀏覽器端清除緩存

**重要：必須清除瀏覽器緩存才能看到新版本！**

#### Chrome/Edge:
1. 按 `Ctrl + Shift + Delete`
2. 選擇「緩存的圖片和文件」
3. 時間範圍選擇「全部時間」
4. 點擊「清除數據」

#### 或使用無痕模式:
- 按 `Ctrl + Shift + N` (Chrome) 或 `Ctrl + Shift + P` (Edge)
- 訪問 https://mini.usdt2026.cc

#### 或強制刷新:
- 按 `Ctrl + Shift + R` 或 `Ctrl + F5`

### 3. Telegram Mini App 清除緩存

如果是在 Telegram 中打開：
1. 關閉 Telegram Mini App
2. 清除 Telegram 緩存（設置 > 數據和存儲 > 清除緩存）
3. 重新打開 Mini App

### 4. 清除 localStorage

如果彈窗還是不顯示，可以清除 localStorage：
1. 打開瀏覽器開發者工具（F12）
2. 進入 Console（控制台）
3. 執行：`localStorage.removeItem('dont_show_game_rules')`
4. 刷新頁面

## 驗證步驟

修復後，請確認：
- [ ] 按鈕顯示為「✨ 遊戲規則 ✨」
- [ ] 按鈕有發光特效（懸停時）
- [ ] 進入發送紅包頁面時自動彈出規則彈窗
- [ ] 彈窗標題「✨ 遊戲規則 ✨」有發光特效
- [ ] 有「以後不再彈出」選擇框
- [ ] 規則內容使用加密貨幣（USDT, TON, STARS, POINTS）而不是「元」

## 如果還是不行

請執行以下命令檢查服務器狀態：

```bash
ssh ubuntu@165.154.254.99
cd /opt/luckyred
git log --oneline -3
ls -la frontend/dist/assets/ | grep SendRedPacket
```

確認構建文件是否包含最新代碼。
