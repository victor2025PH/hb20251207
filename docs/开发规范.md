# 开发规范

## 文件命名规范

### 服务器脚本命名规则

**重要规则：所有在服务器上运行的脚本文件，文件名必须使用英文，禁止使用中文。**

#### 原因
1. **编码兼容性**：Linux 服务器默认使用 UTF-8，但不同系统的编码处理可能不一致
2. **Git 兼容性**：Git 在处理中文文件名时可能出现编码问题
3. **跨平台兼容性**：Windows、Linux、Mac 对中文文件名的处理方式不同
4. **可维护性**：英文文件名更易于在终端中操作和识别

#### 命名规范
- ✅ **正确示例**：
  - `deploy.sh` - 部署脚本
  - `build-frontend.sh` - 构建前端脚本
  - `restart-services.sh` - 重启服务脚本
  - `check-status.sh` - 检查状态脚本
  - `migrate-database.sh` - 数据库迁移脚本

- ❌ **错误示例**：
  - `服务器部署命令.sh` - 包含中文
  - `部署脚本.sh` - 包含中文
  - `重启服务.sh` - 包含中文

#### 脚本文件命名建议
- 使用小写字母和连字符（hyphen）
- 使用描述性的动词开头：`deploy-`, `build-`, `start-`, `stop-`, `restart-`, `check-`, `migrate-`
- 文件名应该清晰表达脚本的功能

#### 示例命名模式
```
deploy.sh                    # 通用部署脚本
deploy-frontend.sh           # 前端部署
deploy-backend.sh            # 后端部署
build-production.sh          # 生产环境构建
restart-api.sh               # 重启 API 服务
check-services.sh            # 检查服务状态
migrate-db.sh                # 数据库迁移
setup-environment.sh         # 环境设置
backup-database.sh           # 数据库备份
```

### 其他文件命名规范

#### 文档文件
- 文档文件可以使用中文名称（`.md` 文件）
- 但建议在文档内部使用英文文件名引用脚本

#### 配置文件
- 配置文件建议使用英文名称
- 例如：`nginx.conf`, `docker-compose.yml`, `package.json`

#### 代码文件
- 代码文件遵循各自语言的命名规范
- Python: `snake_case.py`
- TypeScript/JavaScript: `camelCase.ts` 或 `PascalCase.tsx`
- Shell 脚本: `kebab-case.sh` 或 `snake_case.sh`

## 脚本编写规范

### Shell 脚本基本结构

```bash
#!/bin/bash
# 脚本描述（可以使用中文注释）
# Script description (English)

set -e  # 遇到错误立即退出

# 变量定义
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="/opt/luckyred"

# 函数定义
function deploy() {
    echo "Deploying..."
    # 部署逻辑
}

# 主逻辑
main() {
    deploy
}

# 执行主函数
main "$@"
```

### 脚本注释规范

```bash
#!/bin/bash
# 脚本名称: deploy.sh
# 功能描述: 部署最新代码到生产环境
# 作者: [Your Name]
# 创建日期: 2025-12-07
# 最后更新: 2025-12-07
```

## 提交规范

### Git 提交信息

- 使用中文或英文都可以，但建议使用英文
- 格式：`<type>: <subject>`
- 类型：
  - `feat`: 新功能
  - `fix`: 修复问题
  - `docs`: 文档更新
  - `refactor`: 重构
  - `test`: 测试
  - `chore`: 构建/工具相关

### 示例
```
fix: add English-named deployment script to avoid encoding issues
docs: add development guidelines for script naming
feat: implement authentication strategy based on request origin
```

## 检查清单

在创建新的服务器脚本前，请确认：

- [ ] 文件名使用英文
- [ ] 文件名使用小写字母和连字符
- [ ] 文件名清晰表达脚本功能
- [ ] 脚本包含适当的注释
- [ ] 脚本包含错误处理（`set -e`）
- [ ] 脚本已添加执行权限（`chmod +x`）
- [ ] 已在测试环境验证脚本功能

## 相关文档

- [部署运维文档](./部署运维文档.md)
- [认证策略配置说明](./认证策略配置说明.md)

