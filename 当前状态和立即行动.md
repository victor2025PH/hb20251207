# ğŸ“Š å½“å‰çŠ¶æ€å’Œç«‹å³è¡ŒåŠ¨

## âœ… åˆšåˆšå®Œæˆ

### TypeScript ç¼–è¯‘é”™è¯¯ä¿®å¤
- âœ… ä¿®å¤äº† `Recharge.tsx` ä¸­çš„ 2 ä¸ªç¼–è¯‘é”™è¯¯
- âœ… ä¿®å¤äº† `Withdraw.tsx` ä¸­çš„ 2 ä¸ªç¼–è¯‘é”™è¯¯
- âœ… æ‰€æœ‰ä¿®å¤å·²æ¨é€åˆ° GitHub

**ä¿®å¤å†…å®¹**ï¼š
- å°† `t(key, fallback)` æ”¹ä¸º `t(key) || fallback`
- ç¬¦åˆ TypeScript ç±»å‹å®šä¹‰
- ä¿æŒ fallback åŠŸèƒ½

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨ï¼ˆç°åœ¨æ‰§è¡Œï¼‰

### æ­¥éª¤1ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ‹‰å–æœ€æ–°ä»£ç å¹¶éƒ¨ç½²

```bash
# SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh ubuntu@your-server-ip

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/luckyred

# å¤„ç†æœ¬åœ°æ›´æ”¹å¹¶æ‹‰å–æœ€æ–°ä»£ç 
git stash
git pull origin master

# è¿è¡Œéƒ¨ç½²æµ‹è¯•ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰
bash scripts/sh/test-deployment.sh

# æ‰§è¡Œéƒ¨ç½²
bash scripts/sh/pull-and-deploy.sh
```

### æ­¥éª¤2ï¼šéªŒè¯éƒ¨ç½²æˆåŠŸ

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status luckyred-api
sudo systemctl status luckyred-bot
sudo systemctl status nginx

# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health
curl http://localhost:8080/health/detailed

# æ£€æŸ¥å‰ç«¯æ„å»º
ls -la frontend/dist/
```

### æ­¥éª¤3ï¼šåŠŸèƒ½æµ‹è¯•

**å‰ç«¯æµ‹è¯•**ï¼š
1. è®¿é—® MiniAppï¼š`https://mini.usdt2026.cc`
2. æµ‹è¯•ç™»å½•åŠŸèƒ½ï¼ˆTelegram/Webï¼‰
3. æµ‹è¯•å‘é€çº¢åŒ…
4. æµ‹è¯•é¢†å–çº¢åŒ…
5. æµ‹è¯•é’±åŒ…åŠŸèƒ½
6. æµ‹è¯•å……å€¼åŠŸèƒ½ï¼ˆé iOSï¼‰
7. æµ‹è¯•æç°åŠŸèƒ½ï¼ˆé iOSï¼‰
8. æµ‹è¯•å…‘æ¢åŠŸèƒ½ï¼ˆé iOSï¼‰
9. æµ‹è¯•ç­¾åˆ°åŠŸèƒ½
10. æµ‹è¯•æ¨èç³»ç»Ÿ
11. æµ‹è¯•ä»»åŠ¡ç³»ç»Ÿ
12. éªŒè¯ iOS è®¾å¤‡åˆè§„UIï¼ˆéšè—é‡‘èåŠŸèƒ½ï¼‰

**åç«¯æµ‹è¯•**ï¼š
```bash
# æŸ¥çœ‹æ—¥å¿—ï¼Œç¡®è®¤æ— é”™è¯¯
sudo journalctl -u luckyred-api -n 50 | grep -i error

# æµ‹è¯• API ç«¯ç‚¹
curl -H "X-Telegram-Init-Data: test" http://localhost:8080/api/v1/users/me
```

---

## ğŸ“‹ éªŒè¯æ¸…å•

### éƒ¨ç½²éªŒè¯
- [ ] Git pull æˆåŠŸï¼Œæ— å†²çª
- [ ] éƒ¨ç½²æµ‹è¯•è„šæœ¬å…¨éƒ¨é€šè¿‡
- [ ] å‰ç«¯æ„å»ºæˆåŠŸï¼ˆæ—  TypeScript é”™è¯¯ï¼‰
- [ ] API æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] Bot æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] Nginx é…ç½®æ­£ç¡®
- [ ] SSL è¯ä¹¦æœ‰æ•ˆ

### åŠŸèƒ½éªŒè¯
- [ ] å‰ç«¯å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] ä¸»è¦åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] åˆè§„UIæ­£å¸¸å·¥ä½œï¼ˆiOS éšè—é‡‘èåŠŸèƒ½ï¼‰
- [ ] æ— ä¸¥é‡é”™è¯¯æ—¥å¿—

### ç›‘æ§éªŒè¯
- [ ] å¥åº·æ£€æŸ¥ç«¯ç‚¹æ­£å¸¸
- [ ] ç›‘æ§ä¸­é—´ä»¶æ­£å¸¸å·¥ä½œ
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] æ€§èƒ½æŒ‡æ ‡æ­£å¸¸

---

## ğŸš€ å¦‚æœéƒ¨ç½²æˆåŠŸ

### ä¸‹ä¸€æ­¥ä¼˜åŒ–ä»»åŠ¡

#### 1. æ€§èƒ½ä¼˜åŒ–
- [ ] åˆ†ææ…¢æŸ¥è¯¢
- [ ] æ·»åŠ  Redis ç¼“å­˜
- [ ] ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•
- [ ] å‰ç«¯æ€§èƒ½ä¼˜åŒ–

#### 2. å®‰å…¨åŠ å›º
- [ ] é…ç½®é˜²ç«å¢™
- [ ] è®¾ç½® API é€Ÿç‡é™åˆ¶
- [ ] æ£€æŸ¥å®‰å…¨é…ç½®
- [ ] è®¾ç½®ç›‘æ§å‘Šè­¦

#### 3. æŒç»­æ”¹è¿›
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] åˆ†æç”¨æˆ·è¡Œä¸º
- [ ] ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- [ ] æ·»åŠ æ–°åŠŸèƒ½

---

## ğŸ”§ å¦‚æœé‡åˆ°é—®é¢˜

### å¸¸è§é—®é¢˜æ’æŸ¥

#### å‰ç«¯æ„å»ºå¤±è´¥
```bash
# æ£€æŸ¥ TypeScript é”™è¯¯
cd frontend
npm run build

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
npm run build 2>&1 | grep -i error
```

#### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
sudo journalctl -u luckyred-api -n 100

# æ£€æŸ¥é…ç½®æ–‡ä»¶
python3 -c "from shared.config.settings import get_settings; print(get_settings())"
```

#### å¥åº·æ£€æŸ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
sudo -u postgres psql -d luckyred -c "SELECT 1;"

# æ£€æŸ¥ Redis è¿æ¥ï¼ˆå¦‚æœé…ç½®ï¼‰
redis-cli ping
```

---

## ğŸ“ éƒ¨ç½²åæ£€æŸ¥

### ç«‹å³æ£€æŸ¥ï¼ˆéƒ¨ç½²å 5 åˆ†é’Ÿå†…ï¼‰

1. **æœåŠ¡çŠ¶æ€**
   ```bash
   sudo systemctl status luckyred-api luckyred-bot nginx
   ```

2. **å¥åº·æ£€æŸ¥**
   ```bash
   curl http://localhost:8080/health/detailed
   ```

3. **å‰ç«¯è®¿é—®**
   - æµè§ˆå™¨è®¿é—®ï¼š`https://mini.usdt2026.cc`
   - æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½

4. **é”™è¯¯æ—¥å¿—**
   ```bash
   sudo journalctl -u luckyred-api -n 50 | grep -i error
   ```

### æŒç»­ç›‘æ§ï¼ˆéƒ¨ç½²å 1 å°æ—¶å†…ï¼‰

1. **æ€§èƒ½ç›‘æ§**
   ```bash
   # æŸ¥çœ‹æ…¢è¯·æ±‚
   sudo journalctl -u luckyred-api | grep -E "Process-Time.*[1-9]\.[0-9]+s"
   ```

2. **èµ„æºä½¿ç”¨**
   ```bash
   # CPU å’Œå†…å­˜
   top
   
   # ç£ç›˜ç©ºé—´
   df -h
   ```

3. **ç”¨æˆ·åé¦ˆ**
   - è§‚å¯Ÿç”¨æˆ·ä½¿ç”¨æƒ…å†µ
   - æ”¶é›†é”™è¯¯æŠ¥å‘Š
   - ç›‘æ§ç³»ç»ŸæŒ‡æ ‡

---

## ğŸ‰ æˆåŠŸæ ‡å‡†

### éƒ¨ç½²æˆåŠŸæ ‡å‡†
- âœ… æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ
- âœ… å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… å‰ç«¯å¯ä»¥æ­£å¸¸è®¿é—®
- âœ… ä¸»è¦åŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… æ— ä¸¥é‡é”™è¯¯æ—¥å¿—
- âœ… TypeScript ç¼–è¯‘æ— é”™è¯¯

### ç³»ç»Ÿå°±ç»ªæ ‡å‡†
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸
- âœ… ç›‘æ§ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- âœ… æ–‡æ¡£å®Œæ•´
- âœ… éƒ¨ç½²æµç¨‹é¡ºç•…

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—ï¼š`sudo journalctl -u luckyred-api -n 100`
2. è¿è¡Œè¯Šæ–­è„šæœ¬ï¼š`bash scripts/sh/test-deployment.sh`
3. æ£€æŸ¥å¥åº·çŠ¶æ€ï¼š`curl http://localhost:8080/health/detailed`
4. æŸ¥çœ‹æ–‡æ¡£ï¼š`docs/éƒ¨ç½²è¿ç»´æ–‡æ¡£.md`

---

## âœ… å½“å‰çŠ¶æ€

- âœ… TypeScript ç¼–è¯‘é”™è¯¯å·²ä¿®å¤
- âœ… ä»£ç å·²æ¨é€åˆ° GitHub
- â³ **ç­‰å¾…æœåŠ¡å™¨éƒ¨ç½²éªŒè¯**

**ä¸‹ä¸€æ­¥**ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œéƒ¨ç½²ï¼ŒéªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ï¼

