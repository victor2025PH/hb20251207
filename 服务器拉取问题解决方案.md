# ğŸ” æœåŠ¡å™¨æ‹‰å–è„šæœ¬æ‰¾ä¸åˆ°çš„é—®é¢˜åˆ†æå’Œè§£å†³æ–¹æ¡ˆ

## âŒ é—®é¢˜åŸå› 

### 1. **æ–‡ä»¶åç¼–ç é—®é¢˜**
- æ–‡ä»¶ååŒ…å«ä¸­æ–‡å­—ç¬¦ï¼š`ä»GitHubæ‹‰å–å¹¶éƒ¨ç½².sh`
- Linux æœåŠ¡å™¨å¯èƒ½æ— æ³•æ­£ç¡®è¯†åˆ«ä¸­æ–‡æ–‡ä»¶å
- Git åœ¨ Windows å’Œ Linux ä¹‹é—´çš„æ–‡ä»¶åç¼–ç å¯èƒ½ä¸ä¸€è‡´

### 2. **ä»£ç æœªæ›´æ–°**
- æœåŠ¡å™¨ä¸Šçš„ä»£ç è¿˜æ²¡æœ‰æ‹‰å–æœ€æ–°ç‰ˆæœ¬
- æ–°åˆ›å»ºçš„è„šæœ¬æ–‡ä»¶è¿˜æ²¡æœ‰åŒæ­¥åˆ°æœåŠ¡å™¨

### 3. **æ–‡ä»¶è·¯å¾„é—®é¢˜**
- è„šæœ¬è·¯å¾„å¯èƒ½ä¸æ­£ç¡®
- æ–‡ä»¶å¯èƒ½è¿˜æ²¡æœ‰è¢«æ¨é€åˆ° GitHub

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨è‹±æ–‡åç§°è„šæœ¬ï¼ˆæ¨èï¼‰

å·²åˆ›å»ºè‹±æ–‡åç§°çš„è„šæœ¬ï¼š`pull-and-deploy.sh`

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š**
```bash
cd /opt/luckyred
bash scripts/sh/pull-and-deploy.sh
```

### æ–¹æ¡ˆ2ï¼šå…ˆæ‹‰å–ä»£ç ï¼Œå†æ‰§è¡Œè„šæœ¬

**æ­¥éª¤1ï¼šå…ˆæ‹‰å–æœ€æ–°ä»£ç **
```bash
cd /opt/luckyred
git pull origin master
```

**æ­¥éª¤2ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨**
```bash
ls -la scripts/sh/ | grep -i "pull\|deploy\|æ‹‰å–"
```

**æ­¥éª¤3ï¼šæ‰§è¡Œè„šæœ¬**
```bash
# å¦‚æœæ‰¾åˆ°äº†ä¸­æ–‡åç§°çš„è„šæœ¬
bash scripts/sh/ä»GitHubæ‹‰å–å¹¶éƒ¨ç½².sh

# æˆ–ä½¿ç”¨è‹±æ–‡åç§°çš„è„šæœ¬ï¼ˆæ¨èï¼‰
bash scripts/sh/pull-and-deploy.sh
```

### æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨æ‰§è¡Œå®Œæ•´å‘½ä»¤

å¦‚æœè„šæœ¬æ–‡ä»¶ç¡®å®ä¸å­˜åœ¨ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
# 1. æ‹‰å–ä»£ç 
cd /opt/luckyred
git pull origin master

# 2. å®‰è£… API ä¾èµ–
cd api
source .venv/bin/activate
pip install -r requirements.txt
deactivate
cd ..

# 3. å®‰è£… Bot ä¾èµ–
cd bot
source .venv/bin/activate
pip install -r requirements.txt
deactivate
cd ..

# 4. æ„å»ºå‰ç«¯
cd frontend
npm install
npm run build
cd ..

# 5. é‡å¯æœåŠ¡
sudo systemctl restart luckyred-api
sudo systemctl restart luckyred-bot
sudo systemctl reload nginx
```

---

## ğŸ”§ è¯Šæ–­å‘½ä»¤

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è¯Šæ–­é—®é¢˜ï¼š

### 1. æ£€æŸ¥ Git çŠ¶æ€
```bash
cd /opt/luckyred
git status
git remote -v
```

### 2. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
```bash
# æ£€æŸ¥è„šæœ¬ç›®å½•
ls -la scripts/sh/

# æŸ¥æ‰¾éƒ¨ç½²ç›¸å…³è„šæœ¬
find scripts/sh/ -name "*deploy*" -o -name "*pull*" -o -name "*æ‹‰å–*"
```

### 3. æ£€æŸ¥æ–‡ä»¶ç¼–ç 
```bash
# æŸ¥çœ‹æ–‡ä»¶åç¼–ç 
ls -la scripts/sh/ | file -i -
```

### 4. å¼ºåˆ¶æ‹‰å–æœ€æ–°ä»£ç 
```bash
cd /opt/luckyred
git fetch origin
git reset --hard origin/master
```

---

## ğŸ“‹ å®Œæ•´æ“ä½œæµç¨‹

### æ­¥éª¤1ï¼šåœ¨æœåŠ¡å™¨ä¸Šè¯Šæ–­
```bash
# SSH è¿æ¥
ssh ubuntu@your-server-ip

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/luckyred

# æ£€æŸ¥å½“å‰çŠ¶æ€
git status
ls -la scripts/sh/ | head -20
```

### æ­¥éª¤2ï¼šæ‹‰å–æœ€æ–°ä»£ç 
```bash
# ä¿å­˜æœ¬åœ°æ›´æ”¹ï¼ˆå¦‚æœæœ‰ï¼‰
git stash

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin master

# å¦‚æœæ‹‰å–å¤±è´¥ï¼Œå¼ºåˆ¶æ‹‰å–
git fetch origin
git reset --hard origin/master
```

### æ­¥éª¤3ï¼šæ‰§è¡Œéƒ¨ç½²
```bash
# ä½¿ç”¨è‹±æ–‡åç§°è„šæœ¬ï¼ˆæ¨èï¼‰
bash scripts/sh/pull-and-deploy.sh

# æˆ–ä½¿ç”¨å…¶ä»–éƒ¨ç½²è„šæœ¬
bash scripts/sh/deploy-now.sh
bash scripts/sh/deploy-smart.sh
```

---

## ğŸ¯ æ¨èåšæ³•

### 1. ä½¿ç”¨è‹±æ–‡æ–‡ä»¶å
- âœ… `pull-and-deploy.sh` (æ¨è)
- âŒ `ä»GitHubæ‹‰å–å¹¶éƒ¨ç½².sh` (å¯èƒ½æœ‰ç¼–ç é—®é¢˜)

### 2. å…ˆæ‹‰å–ä»£ç ï¼Œå†æ‰§è¡Œè„šæœ¬
```bash
cd /opt/luckyred
git pull origin master
bash scripts/sh/pull-and-deploy.sh
```

### 3. å¦‚æœè„šæœ¬ä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨æ‰§è¡Œ
æŒ‰ç…§ä¸Šé¢çš„"æ–¹æ¡ˆ3"æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶åç¼–ç **
   - é¿å…åœ¨è„šæœ¬æ–‡ä»¶åä¸­ä½¿ç”¨ä¸­æ–‡å­—ç¬¦
   - ä½¿ç”¨è‹±æ–‡å’Œè¿å­—ç¬¦å‘½å

2. **Git é…ç½®**
   - ç¡®ä¿æœåŠ¡å™¨ä¸Šçš„ Git å·²æ­£ç¡®é…ç½®
   - æ£€æŸ¥è¿œç¨‹ä»“åº“ URL

3. **æ–‡ä»¶æƒé™**
   - ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼š`chmod +x scripts/sh/pull-and-deploy.sh`

4. **ç½‘ç»œè¿æ¥**
   - ç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—® GitHub
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

**æœ€ç®€å•çš„éƒ¨ç½²å‘½ä»¤ï¼š**
```bash
cd /opt/luckyred
git pull origin master
bash scripts/sh/pull-and-deploy.sh
```

**å¦‚æœè„šæœ¬ä¸å­˜åœ¨ï¼š**
```bash
cd /opt/luckyred
git fetch origin
git reset --hard origin/master
bash scripts/sh/pull-and-deploy.sh
```


