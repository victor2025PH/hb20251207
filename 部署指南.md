# hbgm001 éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†ç¨‹åºéƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚

## ğŸ“‹ æœåŠ¡å™¨ä¿¡æ¯

- **æœåŠ¡å™¨åœ°å€**: `ubuntu@165.154.254.99`
- **é¡¹ç›®ç›®å½•**: `/home/ubuntu/hbgm001`
- **æœåŠ¡åç§°**: `hbgm001-backend`

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ 1: ä½¿ç”¨ Windows è„šæœ¬è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

**åŒå‡»è¿è¡Œ**: `éƒ¨ç½²åˆ°æœåŠ¡å™¨.bat`

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. è¿æ¥æœåŠ¡å™¨
2. æ£€æŸ¥ç¯å¢ƒ
3. æ‰§è¡Œéƒ¨ç½²

### æ–¹å¼ 2: æ‰‹åŠ¨éƒ¨ç½²ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼‰

#### é¦–æ¬¡éƒ¨ç½²

1. **è¿æ¥åˆ°æœåŠ¡å™¨**:
   ```bash
   ssh ubuntu@165.154.254.99
   ```

2. **ä¸Šä¼ éƒ¨ç½²è„šæœ¬**:
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
   cd /home/ubuntu
   git clone https://github.com/victor2025PH/hb20251207.git hbgm001
   cd hbgm001
   ```

3. **æ‰§è¡Œé¦–æ¬¡éƒ¨ç½²è„šæœ¬**:
   ```bash
   chmod +x deploy/é¦–æ¬¡éƒ¨ç½².sh
   bash deploy/é¦–æ¬¡éƒ¨ç½².sh
   ```

#### æ›´æ–°éƒ¨ç½²

```bash
cd /home/ubuntu/hbgm001
chmod +x deploy/æ›´æ–°éƒ¨ç½².sh
bash deploy/æ›´æ–°éƒ¨ç½².sh
```

## ğŸ“ éƒ¨ç½²æ­¥éª¤è¯¦è§£

### 1. ç³»ç»Ÿå‡†å¤‡

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š
- Git
- Python 3 + pip + venv
- PostgreSQL
- Redis
- Nginx

### 2. ä»£ç éƒ¨ç½²

- å…‹éš†ä»£ç ä»“åº“åˆ° `/home/ubuntu/hbgm001`
- åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ
- å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…

### 3. é…ç½®æ–‡ä»¶

**é‡è¦**: éœ€è¦åˆ›å»º `.env` æ–‡ä»¶

```bash
cd /home/ubuntu/hbgm001
cp env-template.txt .env
nano .env  # ç¼–è¾‘é…ç½®æ–‡ä»¶
```

**å¿…éœ€çš„é…ç½®é¡¹**:
- `BOT_TOKEN`: Telegram Bot Token
- `DATABASE_URL`: PostgreSQL æ•°æ®åº“è¿æ¥
- `SECRET_KEY`: åŠ å¯†å¯†é’¥
- å…¶ä»–é…ç½®é¡¹æ ¹æ®å®é™…æƒ…å†µå¡«å†™

### 4. æœåŠ¡é…ç½®

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»º systemd æœåŠ¡ï¼š
- æœåŠ¡åç§°: `hbgm001-backend`
- è‡ªåŠ¨å¯åŠ¨: å·²å¯ç”¨
- è‡ªåŠ¨é‡å¯: å·²é…ç½®

### 5. å¯åŠ¨æœåŠ¡

```bash
sudo systemctl start hbgm001-backend
sudo systemctl status hbgm001-backend
```

## ğŸ”§ æœåŠ¡ç®¡ç†

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
sudo systemctl status hbgm001-backend
```

### å¯åŠ¨æœåŠ¡
```bash
sudo systemctl start hbgm001-backend
```

### åœæ­¢æœåŠ¡
```bash
sudo systemctl stop hbgm001-backend
```

### é‡å¯æœåŠ¡
```bash
sudo systemctl restart hbgm001-backend
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æ—¥å¿—
sudo journalctl -u hbgm001-backend -f

# æœ€è¿‘ 50 æ¡æ—¥å¿—
sudo journalctl -u hbgm001-backend -n 50

# é”™è¯¯æ—¥å¿—
sudo journalctl -u hbgm001-backend -p err
```

## ğŸ”„ æ›´æ–°ä»£ç 

### æ–¹æ³• 1: ä½¿ç”¨æ›´æ–°è„šæœ¬
```bash
cd /home/ubuntu/hbgm001
bash deploy/æ›´æ–°éƒ¨ç½².sh
```

### æ–¹æ³• 2: æ‰‹åŠ¨æ›´æ–°
```bash
cd /home/ubuntu/hbgm001
git pull origin main
source .venv/bin/activate
pip install -r requirements.txt
sudo systemctl restart hbgm001-backend
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æœåŠ¡æ— æ³•å¯åŠ¨

**æ£€æŸ¥æ­¥éª¤**:
1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€: `sudo systemctl status hbgm001-backend`
2. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: `sudo journalctl -u hbgm001-backend -n 100`
3. æ£€æŸ¥é…ç½®æ–‡ä»¶: `cat /home/ubuntu/hbgm001/.env`
4. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ: `ls -la /home/ubuntu/hbgm001/.venv`
5. æ‰‹åŠ¨æµ‹è¯•: `cd /home/ubuntu/hbgm001 && source .venv/bin/activate && python -m api.main`

### é—®é¢˜ 2: ä¾èµ–å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
cd /home/ubuntu/hbgm001
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

### é—®é¢˜ 3: æ•°æ®åº“è¿æ¥å¤±è´¥

**æ£€æŸ¥**:
1. PostgreSQL æ˜¯å¦è¿è¡Œ: `sudo systemctl status postgresql`
2. æ•°æ®åº“æ˜¯å¦åˆ›å»º
3. `.env` æ–‡ä»¶ä¸­çš„ `DATABASE_URL` æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 4: ç«¯å£è¢«å ç”¨

**æ£€æŸ¥**:
```bash
sudo netstat -tlnp | grep 8080
```

**è§£å†³**:
- ä¿®æ”¹æœåŠ¡é…ç½®ä¸­çš„ç«¯å£
- æˆ–åœæ­¢å ç”¨ç«¯å£çš„å…¶ä»–æœåŠ¡

## ğŸ“Š éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
sudo systemctl status hbgm001-backend
```

åº”è¯¥æ˜¾ç¤º: `Active: active (running)`

### 2. æ£€æŸ¥ API æ˜¯å¦å“åº”
```bash
curl http://localhost:8080/health
```

### 3. æ£€æŸ¥æ—¥å¿—
```bash
sudo journalctl -u hbgm001-backend -n 20
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **é…ç½®é˜²ç«å¢™**: åªå¼€æ”¾å¿…è¦çš„ç«¯å£
2. **ä½¿ç”¨ HTTPS**: é…ç½® SSL è¯ä¹¦
3. **å®šæœŸæ›´æ–°**: ä¿æŒç³»ç»Ÿå’Œä¾èµ–åŒ…æ›´æ–°
4. **å¤‡ä»½æ•°æ®**: å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶
5. **ç›‘æ§æ—¥å¿—**: å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœåŠ¡æ—¥å¿—: `sudo journalctl -u hbgm001-backend -f`
2. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—: `sudo journalctl -xe`
3. éªŒè¯é…ç½®æ–‡ä»¶: `cat /home/ubuntu/hbgm001/.env`

---

**æœ€åæ›´æ–°**: 2025-01-07

